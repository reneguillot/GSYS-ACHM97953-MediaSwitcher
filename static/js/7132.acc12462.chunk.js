"use strict";(self.webpackChunkgcx_media_switcher=self.webpackChunkgcx_media_switcher||[]).push([[7132],{7132:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var r=n(4165),a=n(5861),i=n(9439),u=n(2791),s=n(9434),c=n(3240),d=n(6100),o=n(1389),l=n(2596),h=(n(9534),n(184));(0,l.Z)();var p=function(){var e=u.useState([]),t=(0,i.Z)(e,2),n=t[0],l=t[1],p=u.useState([]),f=(0,i.Z)(p,2),v=f[0],x=f[1],m=u.useState([]),j=(0,i.Z)(m,2),g=j[0],k=j[1],S=u.useState(void 0),b=(0,i.Z)(S,2),w=b[0],y=b[1],Z=u.useState(void 0),H=(0,i.Z)(Z,2),T=H[0],U=H[1],X=(0,s.v9)((function(e){return e.debugMode.value})),I=function(e,t){var n=e.split("_");if(n.length>=3){var r=n[1].toLowerCase();return t.hasOwnProperty(r)?r:void 0}},Q=function(e,t){for(var n=[],r=function(){var r=e[a].name,i=e[a].joined,u=I(r,t);u&&(0==n.filter((function(e){return e.mediaType==u})).length&&n.push({mediaType:u,label:t[u],joinStatus:i}))},a=0;a<e.length;a++)r();return n},M=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,a){var i,u,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(0,d.X)(X,"Home:UpdateQueueStatus:Start - [".concat(t,"] queues to new status [").concat(a,"]")),!w){e.next=11;break}for(i=[],u=0;u<n.length;u++)s=n[u].name,o=n[u].id,I(s,v)==t&&i.push({id:o,joined:a});return e.next=7,c.n.patchUserQueues(w,i);case 7:C(i),(0,d.X)(X,"Home:UpdateQueueStatus:End",i),e.next=12;break;case 11:(0,d.X)(X,"Home:UpdateQueueStatus:UnknownAgentId");case 12:U(void 0),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),(0,d.X)(X,"Home:UpdateQueueStatus:Exception",e.t0),U(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(e){var t=n;t=t.map((function(t){var n=e.filter((function(e){return e.id==t.id}));return 1==n.length&&(t.joined=n[0].joined),t}));var r=Q(t,v);k(r),l(t)};return(0,u.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.n.getCurrentUser();case 3:if(!(t=e.sent).id){e.next=20;break}return(0,d.X)(X,"Home:Init:AgentID",t.id),y(t.id),e.next=9,c.n.getUserQueues(t.id);case 9:return n=e.sent,(0,d.X)(X,"Home:Init:UserQueues",n),l(n),e.next=14,c.n.getSupportedMediaTypes();case 14:a=e.sent,(0,d.X)(X,"Home:Init:SupportedMediaTypes",a),x(a),i=Q(n,a),k(i),(0,d.X)(X,"Home:Init:RelevantMediaTypes",i);case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0),U(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}();(0,d.X)(X,"Home:Init - Initializing Media Switcher"),e()}),[]),(0,h.jsxs)("div",{children:[T&&(0,h.jsxs)(o.TK,{accent:"error",children:[T.code," - ",T.message]}),(0,h.jsx)("h1",{children:"Media Switcher"}),(0,h.jsx)(o.uJ,{className:"toggle-area",children:g.map((function(e){return(0,h.jsx)(o.wf,{checked:e.joinStatus,id:e.mediaType,checkedLabel:e.label,uncheckedLabel:e.label,onCheck:function(t){return function(e,t){M(t,e.detail)}(t,e.mediaType)}},e.mediaType)}))}),(0,h.jsx)(o.rj,{compact:!0,className:"queue-status",hidden:!X,children:(0,h.jsxs)("table",{slot:"data",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Queue"}),(0,h.jsx)("th",{children:"Joined"})]})}),(0,h.jsx)("tbody",{children:n.map((function(e){return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:e.name}),(0,h.jsx)("td",{children:e.joined?"Yes":"No"})]},e.id)}))})]})})]})}}}]);
//# sourceMappingURL=7132.acc12462.chunk.js.map